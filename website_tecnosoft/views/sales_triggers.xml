<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Sticky CTA for Product Page -->
    <template id="tecnosoft_sticky_cta" inherit_id="website_sale.product" name="Tecnosoft Sticky CTA">
        <xpath expr="//div[@id='product_details']" position="after">
        <xpath expr="//div[@id='product_details']" position="after">
            <!-- Sticky CTA Disabled in favor of layout_overrides #tecnosoft_sticky_cart
            <div class="tecnosoft-sticky-cta d-none d-lg-flex shadow-lg p-3 bg-white border-top align-items-center justify-content-between fixed-bottom mb-0 translate-y-100 transition-all">
                ...
            </div>
            -->
        </xpath>
        </xpath>
    </template>

    <!-- Urgency Element: Low Stock Alert -->
    <template id="tecnosoft_urgency_stock" inherit_id="website_sale.product" name="Tecnosoft Urgency Stock">
        <xpath expr="//div[@id='product_details']//form" position="inside">
            <t t-set="threshold" t-value="5"/>
            <div t-if="product.virtual_available &lt;= threshold and product.virtual_available &gt; 0" class="alert alert-warning d-flex align-items-center mt-3 mb-3 py-2 px-3 border-0 rounded-3">
                <i class="fa fa-bolt me-2 text-warning animate-pulse"></i>
                <span class="small fw-bold text-dark">
                    Â¡Date prisa! Solo quedan <t t-esc="int(product.virtual_available)"/> unidades en stock.
                </span>
            </div>
        </xpath>
    </template>

</odoo>
