<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Zenith Header V1: App-First Unified Navigation (Farmatodo Style) -->
    <template id="header_zenith_v1" inherit_id="website.layout" name="Zenith Header V1" active="True" priority="99">
        <xpath expr="//header" position="attributes">
            <attribute name="t-attf-class" add="tecnosoft-header-v1" separator=" "/>
        </xpath>
        <xpath expr="//header//nav" position="replace">
            <div id="o_main_nav" class="o_main_nav header_zenith_v1">
                <!-- =============================================== -->
                <!-- UNIFIED HEADER: Same structure Mobile + Desktop -->
                <!-- =============================================== -->
                
                <!-- ROW 1: Logo / Location / User Icons -->
                <div class="zenith-row-1 bg-white border-bottom py-2">
                    <div class="container d-flex justify-content-between align-items-center">
                        <!-- Logo (Desktop: visible, Mobile: small) -->
                        <t t-call="website.placeholder_header_brand">
                            <t t-set="_link_class" t-valuef="navbar-brand logo p-0 m-0"/>
                        </t>
                        
                        <!-- Location Selector (Center) -->
                        <div class="zenith-location-selector d-none d-lg-flex align-items-center gap-2 px-3 py-2 rounded-pill bg-light border cursor-pointer">
                            <i class="fa fa-map-marker text-primary"></i>
                            <div class="d-flex flex-column lh-1">
                                <span class="text-muted" style="font-size: 0.7rem;">Tu ubicación</span>
                                <span class="fw-bold text-dark" style="font-size: 0.85rem;">Selecciona tu sede <i class="fa fa-chevron-down small"></i></span>
                            </div>
                        </div>
                        
                        <!-- Right Icons (Both viewports, adapted) -->
                        <div class="d-flex align-items-center gap-3">
                            <!-- Wishlist -->
                            <a href="/shop/wishlist" class="text-dark position-relative d-none d-lg-block" title="Favoritos">
                                <i class="fa fa-heart-o" style="font-size: 1.3rem;"></i>
                            </a>
                            
                            <!-- Cart -->
                            <t t-call="website_sale.header_cart_link">
                                <t t-set="_icon" t-value="True"/>
                                <t t-set="_link_class" t-value="'text-dark position-relative p-0'"/>
                                <t t-set="_badge_class" t-value="'position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary'"/>
                            </t>
                            
                            <!-- User (Desktop: Full, Mobile: Icon Only) -->
                            <div class="d-none d-lg-flex align-items-center gap-2">
                                <t t-call="portal.placeholder_user_sign_in">
                                    <t t-set="_link_class" t-valuef="btn btn-primary rounded-pill px-4 fw-bold"/>
                                </t>
                                <t t-call="portal.user_dropdown">
                                    <t t-set="_user_name" t-value="True"/>
                                    <t t-set="_item_class" t-valuef="dropdown"/>
                                    <t t-set="_link_class" t-valuef="nav-link fw-bold text-dark d-flex align-items-center mb-0"/>
                                    <t t-set="_dropdown_menu_class" t-valuef="dropdown-menu-end shadow border-0 mt-2"/>
                                </t>
                            </div>
                            <a href="/my" class="text-dark d-lg-none" title="Mi cuenta">
                                <i class="fa fa-user-o" style="font-size: 1.3rem;"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- ROW 2: Full-Width Pill Search Bar -->
                <div class="zenith-row-2 bg-white py-2">
                    <div class="container">
                        <form method="get" action="/shop" class="o_wsale_products_searchbar_form w-100">
                            <div class="input-group zenith-search-pill">
                                <span class="input-group-text bg-light border-0 rounded-start-pill ps-4">
                                    <i class="fa fa-search text-primary"></i>
                                </span>
                                <input type="text" name="search" 
                                       class="form-control bg-light border-0 py-3" 
                                       placeholder="¿Qué estás buscando hoy?"
                                       aria-label="Buscar productos"/>
                                <button class="btn btn-primary rounded-end-pill px-4 fw-bold" type="submit">
                                    Buscar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- ROW 3: Quick Categories / Status Chips -->
                <div class="zenith-row-3 bg-white border-bottom shadow-sm">
                    <div class="container py-2">
                        <div class="d-flex align-items-center gap-3 overflow-auto zenith-chips-scroll" style="scrollbar-width: none;">
                            <!-- Categories Dropdown (Desktop) -->
                            <div class="category-dropdown dropdown d-none d-lg-block">
                                <a class="btn btn-outline-primary rounded-pill d-flex align-items-center gap-2 px-4 py-2" href="#" role="button" data-bs-toggle="dropdown">
                                    <i class="fa fa-bars"></i> Categorías
                                </a>
                                <ul class="dropdown-menu shadow-lg border-0 p-3 mt-2 rounded-4">
                                    <li><a class="dropdown-item py-2 rounded" href="/shop">Todos los Productos</a></li>
                                    <li><hr class="dropdown-divider opacity-50"/></li>
                                    <t t-set="categories" t-value="request.env['product.public.category'].search([('parent_id', '=', False)], limit=10)"/>
                                    <t t-foreach="categories" t-as="cat">
                                        <li><a class="dropdown-item py-2 rounded" t-att-href="'/shop/category/%s' % slug(cat)" t-esc="cat.name"/></li>
                                    </t>
                                </ul>
                            </div>
                            
                            <!-- Quick Chips (Both viewports) -->
                            <a href="/shop?tag=ofertas" class="zenith-chip d-flex align-items-center gap-2 px-3 py-2 rounded-pill bg-light border text-decoration-none flex-shrink-0">
                                <i class="fa fa-bolt text-warning"></i>
                                <span class="small fw-bold text-dark">Ofertas</span>
                            </a>
                            <a href="/shop?tag=nuevo" class="zenith-chip d-flex align-items-center gap-2 px-3 py-2 rounded-pill bg-light border text-decoration-none flex-shrink-0">
                                <i class="fa fa-star text-success"></i>
                                <span class="small fw-bold text-dark">Nuevos</span>
                            </a>
                            <a href="/shop?tag=masvendidos" class="zenith-chip d-flex align-items-center gap-2 px-3 py-2 rounded-pill bg-light border text-decoration-none flex-shrink-0">
                                <i class="fa fa-fire text-danger"></i>
                                <span class="small fw-bold text-dark">Más Vendidos</span>
                            </a>
                            
                            <!-- Main Menu (Desktop Only) -->
                            <div class="collapse navbar-collapse d-none d-lg-flex ms-auto" id="top_menu_collapse">
                                <t t-call="website.navbar_nav">
                                    <t t-set="_nav_class" t-valuef="navbar-nav"/>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>
</odoo>
