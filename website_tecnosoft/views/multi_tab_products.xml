<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="s_tecnosoft_multi_tab_products" name="Multi-Tab Showcase">
        <section class="s_tecnosoft_multi_tab_products pt-5 pb-5">
            <div class="container">
                <div class="row mb-5 align-items-end">
                    <div class="col-md-6">
                        <h2 class="fw-bold text-dark text-uppercase mb-0">Nuestra Selecci√≥n</h2>
                        <div class="bg-primary mt-2" style="width: 50px; height: 3px;"></div>
                    </div>
                    <div class="col-md-6 mt-3 mt-md-0">
                        <ul class="nav nav-pills justify-content-md-end gap-2" id="zenithTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active rounded-pill px-4" id="new-tab" data-bs-toggle="tab" data-bs-target="#new-prods" type="button" role="tab">Nuevos</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link rounded-pill px-4" id="pop-tab" data-bs-toggle="tab" data-bs-target="#pop-prods" type="button" role="tab">Populares</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link rounded-pill px-4" id="sale-tab" data-bs-toggle="tab" data-bs-target="#sale-prods" type="button" role="tab">Ofertas</button>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="tab-content" id="zenithTabsContent">
                    <!-- NEW PRODUCTS TAB -->
                    <div class="tab-pane fade show active" id="new-prods" role="tabpanel">
                        <div class="row g-4">
                            <t t-set="new_list" t-value="request.env['product.template'].sudo().search([('website_published','=',True)], order='create_date desc', limit=4)"/>
                            <t t-foreach="new_list" t-as="product">
                                <div class="col-6 col-lg-3">
                                    <t t-call="website_sale.products_item"/>
                                </div>
                            </t>
                        </div>
                    </div>
                    <!-- POPULAR PRODUCTS TAB -->
                    <div class="tab-pane fade" id="pop-prods" role="tabpanel">
                         <div class="row g-4">
                            <t t-set="pop_list" t-value="request.env['product.template'].sudo().search([('website_published','=',True)], limit=100).sorted(key=lambda r: r.sales_count, reverse=True)[:4]"/>
                            <t t-foreach="pop_list" t-as="product">
                                <div class="col-6 col-lg-3">
                                    <t t-call="website_sale.products_item"/>
                                </div>
                            </t>
                        </div>
                    </div>
                    <!-- SALE PRODUCTS TAB -->
                    <div class="tab-pane fade" id="sale-prods" role="tabpanel">
                         <div class="row g-4">
                            <t t-set="sale_list" t-value="request.env['product.template'].sudo().search([('website_published','=',True)], limit=4)"/> <!-- Filter should be for actual discount if possible -->
                            <t t-foreach="sale_list" t-as="product">
                                <div class="col-6 col-lg-3">
                                    <t t-call="website_sale.products_item"/>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </template>
</odoo>
