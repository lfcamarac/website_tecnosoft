<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="product_add_to_compare_remove" name="Replace Default Compare" inherit_id="website_sale_comparison.product_add_to_compare">
        <xpath expr="//t[@t-set='categories']" position="replace"/>
        <xpath expr="//t[@t-set='product_variant_id']" position="replace"/>
        <xpath expr="//button" position="replace"/>
    </template>
    <template id="product_add_to_compare" name='Add to comparison in product page' inherit_id="website_sale.product" priority="81">
        <xpath expr="//div[@id='product_option_block']" position="inside">
            <t t-if="is_view_active('website_sale_comparison.product_add_to_compare')">
                <t t-set="categories" t-value="product.valid_product_template_attribute_line_ids._prepare_categories_for_display()"/>
                <t t-set="product_variant_id" t-value="product._get_first_possible_variant_id()"/>
                <button t-if="product_variant_id and categories" type="button" role="button" class="d-none d-md-block btn btn-link px-0 o_add_compare_dyn" aria-label="Compare" t-att-data-product-product-id="product_variant_id" data-action="o_comparelist">
                    <span class="fa fa-exchange me-2"/>
Compare
                </button>
            </t>
        </xpath>
    </template>

</odoo>
